<?xml version="1.0"?>
<!-- $Id$ -->
<!--
  Zeppelin NT-07 airship.

  Copyright (C) 2008  Anders Gidenstam  (anders(at)gidenstam.org)
  This file is licensed under the GPL license version 2 or later.
-->
<PropertyList>

 <sim>

  <description>Zeppelin NT07 airship</description>
  <author>Anders Gidenstam</author>
  <status>development</status>
  <aircraft-version>$Id$</aircraft-version>
  
  <flight-model>jsb</flight-model>
  <aero>ZLT-NT</aero>

  <presets>
   <onground type="bool">true</onground>
   <!-- altitude-agl-ft type="double">6.0</altitude-agl-ft -->
  </presets>

  <!-- 3d model -->
  <model>
   <path>Aircraft/ZLT-NT/Models/ZLT-NT.xml</path>
  </model>

  <!-- Views -->
  <view n="0">
   <!-- Pilot's position. -->
   <name>Pilot View</name>
   <internal>true</internal>
   <config>
    <!-- x/y/z == right/up/back -->
    <x-offset-m type="double"> -0.45 </x-offset-m>
    <y-offset-m type="double"> -7.75 </y-offset-m>
    <z-offset-m type="double"> 18.65 </z-offset-m>
    <pitch-offset-deg type="double"> -20.0 </pitch-offset-deg>
   </config>
  </view>
  <!-- Views -->
  <view n="100">
   <!-- Copilot's position. -->
   <name>Copilot View</name>
   <internal>true</internal>
   <config>
    <!-- x/y/z == right/up/back -->
    <from-model type="bool">true</from-model>
    <from-model-idx type="int">0</from-model-idx>
    <x-offset-m type="double">  0.45 </x-offset-m>
    <y-offset-m type="double"> -7.75 </y-offset-m>
    <z-offset-m type="double"> 18.65 </z-offset-m>
    <pitch-offset-deg type="double"> -20.0 </pitch-offset-deg>
    <default-field-of-view-deg type="double"> 65 </default-field-of-view-deg>
   </config>
  </view>

  <!-- Move the center of the external views. -->
  <view n="1">
   <config>
    <target-z-offset-m archive="y"> 20.0 </target-z-offset-m>
   </config>
  </view>
  <view n="2">
   <config>
    <target-z-offset-m archive="y"> 20.0 </target-z-offset-m>
   </config>
  </view>
  <view n="3">
   <config>
    <target-z-offset-m archive="y"> 20.0 </target-z-offset-m>
   </config>
  </view>
  <view n="5">
   <config>
    <target-z-offset-m archive="y"> 20.0 </target-z-offset-m>
   </config>
  </view>
  <view n="6">
   <config>
    <target-z-offset-m archive="y"> 20.0 </target-z-offset-m>
   </config>
  </view>

  <chase-distance-m type="double">-120.0</chase-distance-m>

  <sound>
   <audible>true</audible>
   <path>Aircraft/ZLT-NT/Sounds/ZLT-NT-sound.xml</path>
  </sound>

  <!-- Aircraft specific help. -->
  <help include="help.xml"/>

  <systems>
   <electrical>
    <path/>
   </electrical>
  </systems>
  <instrumentation>
   <path>Aircraft/ZLT-NT/Systems/instrumentation.xml</path>
  </instrumentation>

  <multiplay>
   <generic>
    <float n="0" alias="/fdm/jsbsim/propulsion/engine[0]/pitch-angle-rad"/>
    <float n="1" alias="/fdm/jsbsim/propulsion/engine[1]/pitch-angle-rad"/>
    <float n="2" alias="/fdm/jsbsim/propulsion/engine[2]/pitch-angle-rad"/>
    <float n="3"
           alias="/instrumentation/heading-indicator/indicated-heading-deg"/>
    <float n="4"
           alias="/instrumentation/attitude-indicator/indicated-pitch-deg"/>
    <float n="5"
           alias="/instrumentation/attitude-indicator/indicated-roll-deg"/>
    <!-- float n="6"
           alias="/instrumentation/attitude-indicator/horizon-offset-deg"/ -->
    <int n="0" type="int">0</int>         <!-- MP switches 1 -->
    <string n="0" type="string"></string> <!-- MP events -->
    <string n="1" type="string"></string> <!-- MP TDM1 -->
    <string n="2" type="string"></string> <!-- MP TDM2 -->
    <string n="3" type="string"></string> <!-- MP TDM3 -->
   </generic>
  </multiplay>

  <max-simtime-per-frame n="0" type="double">0.1</max-simtime-per-frame>
 </sim>

 <payload>
  <weight>
   <name type="string">Pilot (left)</name>
   <weight-lb alias="/fdm/jsbsim/inertia/pointmass-weight-lbs[3]"/>
   <min-lb type="double">0.0</min-lb>
   <max-lb type="double">300.0</max-lb>
  </weight>
  <weight>
   <name type="string">Pilot (right)</name>
   <weight-lb alias="/fdm/jsbsim/inertia/pointmass-weight-lbs[4]"/>
   <min-lb type="double">0.0</min-lb>
   <max-lb type="double">300.0</max-lb>
  </weight>
  <weight>
   <name type="string">Cabin payload</name>
   <weight-lb alias="/fdm/jsbsim/inertia/pointmass-weight-lbs[5]"/>
   <min-lb type="double">0.0</min-lb>
   <max-lb type="double">2293.0</max-lb>
  </weight>
  <weight>
   <name type="string">Ballast</name>
   <weight-lb alias="/fdm/jsbsim/inertia/pointmass-weight-lbs[0]"/>
   <min-lb type="double">0.0</min-lb>
   <max-lb type="double">10000.0</max-lb>
  </weight>
 </payload>

 <limits>
  <vne>70.0</vne>
 </limits>

 <nasal>
  <ZLTNT>
   <file>Aircraft/ZLT-NT/Systems/ZLT-NT.nas</file>
   <file>Aircraft/ZLT-NT/Systems/ground_handling.nas</file>
   <file>Aircraft/ZLT-NT/Systems/mp-network.nas</file>
  </ZLTNT>
  <limits>
   <file>Aircraft/Generic/limits.nas</file>
  </limits>
  <!--  Instrument drivers. -->
  <M877>
   <file>Aircraft/Instruments-3d/clock/M877/M877.nas</file>
  </M877>
  <VHF22>
   <file>Aircraft/ZLT-NT/DualControl/Instruments/VHF-22/ctl22.nas</file>
  </VHF22>
  <VIR32>
   <file>Aircraft/ZLT-NT/DualControl/Instruments/VIR-32/ctl32.nas</file>
  </VIR32>
  <citation>
   <file>Aircraft/CitationX/Nasal/flightdirector.nas</file>
   <file>Aircraft/CitationX/Nasal/Primus1000.nas</file>
   <file>Aircraft/CitationX/Nasal/rmu.nas</file>
  </citation>
  <!-- Dual control. -->
  <dual_control_tools>
   <file>Aircraft/ZLT-NT/DualControl/dual-control-tools.nas</file>
  </dual_control_tools>
  <aircraft_dual_control>
   <file>Aircraft/ZLT-NT/Systems/ZLT-NT-dual-control.nas</file>
  </aircraft_dual_control>
  <dual_control_pilot>
   <file>Aircraft/ZLT-NT/DualControl/pilot-dual-control.nas</file>
  </dual_control_pilot>
 </nasal>

 <input>
  <keyboard>
   <!-- Keyboard commands -->

   <!-- Ballast commands ====================================== -->
   <key n="87"> 
    <name>W</name>
    <desc>Perform on-ground weigh-off.</desc>
    <binding> 
     <command>nasal</command>
     <script>
      gui.popupTip("Weigh-off in progress.");
      ZLTNT.auto_weighoff();
     </script>     
    </binding>
   </key>

   <key n="119">
    <name>w</name>
    <desc>Show current on-ground weight.</desc>
    <binding>
     <command>nasal</command>
     <script>
      ZLTNT.print_wow();
     </script>
    </binding>
   </key>

   <key n="100">
    <name>d</name>
    <desc>Drop 0.1% ballast</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       gui.popupTip("Dropping ballast!");
       interpolate(ZLTNT.ballast_p,
                   0.999 * getprop(ZLTNT.ballast_p), 0.5);
     </script>
    </binding>
   </key>

   <key n="68">
    <name>D</name>
    <desc>Drop 1% ballast</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
       gui.popupTip("Dropping ballast!");
       interpolate(ZLTNT.ballast_p,
                   0.99 * getprop(ZLTNT.ballast_p), 0.5);
     </script>
    </binding>
   </key>

   <!-- Gas cell commands ====================================== -->
   <key n="70">
    <name>F</name>
    <desc>Open gas valve.</desc>
    <binding>
     <command>nasal</command>
     <script>
       gui.popupTip("Gas valve open!");
       setprop("/fdm/jsbsim/buoyant_forces/gas-cell/valve_open",
               1.00);
     </script>
    </binding>
   </key>

   <key n="102">
    <name>f</name>
    <desc>Close gas valve.</desc>
    <binding>
     <command>nasal</command>
     <script>
       gui.popupTip("Gas valve closed!");
       setprop("/fdm/jsbsim/buoyant_forces/gas-cell/valve_open",
               0.00);
     </script>
    </binding>
   </key>

   <!-- Ballonet commands ====================================== -->
   <key n="113">
    <name>q</name>
    <desc>Deflate forward ballonet</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
      ZLTNT.step_ballonet_cmd(0, -0.05);
     </script>
    </binding>
   </key>
   <key n="81">
    <name>Q</name>
    <desc>Inflate forward ballonet</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
      ZLTNT.step_ballonet_cmd(0, 0.05);
     </script>
    </binding>
   </key>

   <key n="97">
    <name>a</name>
    <desc>Deflate aft ballonet</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
      ZLTNT.step_ballonet_cmd(1, -0.05);
     </script>
    </binding>
   </key>
   <key n="65">
    <name>A</name>
    <desc>Inflate aft ballonet</desc>
    <repeatable type="bool">true</repeatable>
    <binding>
     <command>nasal</command>
     <script>
      ZLTNT.step_ballonet_cmd(1, 0.05);
     </script>
    </binding>
   </key>

   <!-- Mooring commands ======================================= -->
   <key n="85">
    <name>U</name>
    <desc>Attach mooring wire.</desc>
    <binding>
     <command>nasal</command>
     <script>
       ZLTNT.mooring.attach_mooring_wire();
     </script>
    </binding>
   </key>

   <key n="89">
    <name>Y</name>
    <desc>Release mooring connection or wire.</desc>
    <binding>
     <command>nasal</command>
     <script>
       ZLTNT.mooring.release_mooring();
     </script>
    </binding>
   </key>

   <key n="117">
    <name>u</name>
    <desc>Winch in mooring wire.</desc>
    <binding>
     <command>nasal</command>
     <script>
       var sp = getprop("/fdm/jsbsim/mooring/winch-speed-fps");
       ZLTNT.mooring.set_winch_speed(sp - 0.5);
     </script>
    </binding>
   </key>

   <key n="121">
    <name>y</name>
    <desc>Winch out mooring wire.</desc>
    <binding>
     <command>nasal</command>
     <script>
       var sp = getprop("/fdm/jsbsim/mooring/winch-speed-fps");
       ZLTNT.mooring.set_winch_speed(sp + 0.5);
     </script>
    </binding>
   </key>

  </keyboard>
 </input>

</PropertyList>
